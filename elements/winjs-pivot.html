<link rel="import" href="../bower_components/polymer/polymer.html">

<polymer-element name="winjs-pivot" tagName="Pivot">
  <template>
    <style type="text/css">
        :host {
          display: -ms-flexbox;
          display: -webkit-flex;
          display: flex;
          -ms-flex-direction: column;
          -webkit-flex-direction: column;
          flex-direction: column;
          -ms-flex-wrap: none;
          -webkit-flex-wrap: nowrap;
          flex-wrap: nowrap;
          height: 100%;
          width: 100%;
          overflow: hidden;
          -ms-scroll-limit-x-max: 0px;
          min-height: 500px;
        }
        :host .win-pivot-navbutton {
          transition: opacity linear 167ms;
          -webkit-transition: opacity linear 167ms;
          position: absolute;
          width: 28px;
          height: 72px;
          margin: 12px 4px 0px 4px;
          top: 0px;
          align-items: center;
          justify-content: center;
          min-width: 0px;
          border-width: 0px;
          cursor: pointer;
          background-color: gray;
          opacity: 0;
        }
        :host .win-pivot-headers.win-pivot-shownavbuttons .win-pivot-navbutton {
          opacity: 0.8;
        }
        :host .win-pivot-navbutton-next {
          right: 0px;
        }
        :host  .win-pivot-title {
          font-size: 14pt;
          font-family: 'Segoe', 'Helvetica';
          font-weight: 600;
          white-space: nowrap;
        }

        :host  > .win-pivot-item {
          /*
            Hide the pivot items defined declaratively until we reparent them to ensure correct
            measuring and to avoid showing unprocessed content in the wrong location.
            */
          display: none;
        }
        :host .win-pivot-headers {
          -ms-flex: 0 0 auto;
          -webkit-flex: 0 0 auto;
          flex: 0 0 auto;
          white-space: nowrap;
          position: relative;
        }
        :host .win-pivot-header {
          display: inline-block;
          height: 72px;
          transition: opacity linear 167ms;
          -webkit-transition: opacity linear 167ms;
        }
        :host  button.win-pivot-header,
        :host  button.win-pivot-header:hover,
        :host  button.win-pivot-header:focus,
        :host  button.win-pivot-header:hover:active {
          background-color: transparent;
          border: 0;
          outline: 0;
          margin: 0;
          padding: 0px 9px;
          letter-spacing: 0px;
          min-height: 0;
          overflow: visible;
          max-width: none;
          min-width: 0;
          font-size: 45pt;
          font-weight: 400;
          font-family: "Segoe WP Semilight";
        }
        :host.win-pivot-locked .win-pivot-header {
          opacity: 0;
          visibility: hidden;
        }
        :host  .win-pivot-header.win-pivot-header-selected,
        :host.win-pivot-locked .win-pivot-header.win-pivot-header-selected {
          opacity: 1.0;
          visibility: inherit;
        }
        :host .win-pivot-viewport {
          /* Overlap the headers but not the title */
          height: 100%;
          overflow-x: auto;
          overflow-y: hidden;
          -ms-scroll-snap-type: mandatory;
          -ms-scroll-snap-points-x: snapInterval(0%, 100%);
          -ms-overflow-style: none;
          /* The following 3 styles take advantage of a Trident bug to make the viewport pannable on the header track. The viewport is extended over the
                header track space, and position: relative allows interacting with it as if the viewport was drawn over the header track.
            */
          position: relative;
        }
        :host.win-pivot-nosnap .win-pivot-viewport {
          padding-top: 0px;
          margin-top: 0px;
        }
        :host.win-pivot-locked .win-pivot-viewport {
          overflow: hidden;
        }
        :host  .win-pivot-surface {
          width: 10000%;
          height: 100%;
          position: relative;
        }
        :host.win-pivot-nosnap .win-pivot-surface {
          width: 100%;
        }
    </style>

    <div class="win-pivot-title">{{title}}</div>
    <div class="win-pivot-headers">headers go here</div>
    <div class="win-pivot-viewport">
      <div class="win-pivot-surface">
        <content></content>
      </div>
    </div>
  </template>
  <script>
    (function() {

      // Tab control which displays an item of content.
      Polymer('winjs-pivot', {

        created: function() {
          console.log("created");
        },

        ready: function() {
              console.log("ready");
        },

        attached: function() {
              console.log("attached");
        },

        domReady: function() {
              console.log("domReady");
        },

        detached: function() {
              console.log("detached");
        },

        attributeChanged: function(attrName, oldVal, newVal) {
              console.log("attributeChanged: " + attrName, 'old: ' + oldVal, 'new:', newVal);
        }
      });

    })();
  </script>
</polymer-element>